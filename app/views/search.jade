doctype html
html( class="no-js")  
    head    
        title=title
        //- meta( name='viewport', content='width=device-width, initial-scale=1.0' ) 
        //- link(rel='stylesheet', type='text/css', href='Login_v9/fonts/font-awesome-4.7.0/css/font-awesome.min.css')
        //- link(rel='stylesheet', type='text/css', href='Login_v9/fonts/iconic/css/material-design-iconic-font.min.css')
        //- link(href='/bootstrap/dist/css/bootstrap.min.css', rel='stylesheet')
        link(href='/css/main.css', rel='stylesheet')
       
        //- link(href='/css/all.css', rel='stylesheet') 
          <meta charset="utf-8">
        //- <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
        meta( name='keywords', content='' ) 
        meta( name='description', content='' ) 
        
        //- <!--    Authentic Template   http://www.templatemo.com/tm-412-authentic    -->
        meta( name='viewport', content='width=device-width' ) 
        link(rel='stylesheet', type='text/css', href='templateInside/css/templatemo_main.css')
        script(src='jquery/dist/jquery-3.3.1.js')
        script(src='jquery/dist/jquery.dataTables.min.js')
        script(src='bootstrap/dist/js/dataTables.bootstrap.min.js')
        script.
            $(document).ready(function(){
                $("#myInput").on("keyup", function() {
                    var value = $(this).val().toLowerCase();
                    $("#tbmaterial tr").filter(function() {
                        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                    });
                });

            });
               $( window ).on( "load", function() {
                    var url_string  = window.location.href;  
                    const urlParams = new URLSearchParams(window.location.search);
                    const myParam = urlParams.get('room');
                   
                  
                    var value = myParam.toLowerCase();
                    $("#tbmaterial tr").filter(function() {
                        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                    });
               
                });
                         
    body
        
            div#main-wrapper
                div.container
                    if(role=='general')
                        include ./templateGeneral
                    else
                        include ./templateAdmin
                    div.pagename 
                        div.row    
                                div.col-xs-1.col-sm-1.col-md-1.col-lg-1
                                    button.btn.btn-info.btn-sm(type='submit' style="float:left;" onclick="window.location.href='/map'")
                                        i.fa.fa-map-marker  Map
                                div.col-xs-11.col-sm-11.col-md-11.col-lg-11
                                    span Search   
                        br
                        div.row    
                                div.col-xs-8.col-sm-8.col-md-8.col-lg-8
                               
                                div.col-xs-4.col-sm-4.col-md-4.col-lg-4 
                                    input.form-control#myInput.input-xs( type="text" placeholder="Search..")
 
                    table#tbmaterial.tb.table.table-striped.table-bordered.table-sm(cellspacing="0" width="100%" data-show-header="true" data-pagination="true"
           data-id-field="name"
           data-page-list="[5, 10, 25, 50, 100, ALL]"
           data-page-size="5")
                                thead
                                    tr.header(style="background-color:#8e7863;color:white;")
                                        td(style="font-weight: bold;") วันที่อัพเดท
                                        td(style="font-weight: bold;") ชื่อครุภัณฑ์
                                        td(style="font-weight: bold;") รูปภาพ
                                        td(style="font-weight: bold;") บาร์โคด
                                        td(style="font-weight: bold;") หมายเลขครุภัณฑ์
                                        td(style="font-weight: bold;") ตำแหน่ง
                                        if(role=='general')
                                            td(style="font-weight: bold;text-align:center;") จัดการ
                                        else
                                            td(style="font-weight: bold;text-align:center;" colspan="2") จัดการ
                                       
                                tbody
                                   - each item in rows
                                        tr
                                            td= item.updateDate.toDateString()
                                            td= item.nameobject
                                            td(style="width:15%") 
                                                img.picintb(src='data:image/jpg;base64,'+item.imageobject.data style="width:100%;display: block;"  class="img-responsive")
                                            td(style="width:15%") 
                                                img.picintb(src='data:image/jpg;base64,'+item.imagebarcode.data style="width:100%;display: block;"  class="img-responsive")
                                            
                                            td= item.materialid
                                            td= item.location

                                            if(role=='general')
                                                td 
                                                    div(style="display:inline;")
                                                        a.btn.btn-warning.btn-xs.btnEditDelete(type='submit' style="float:left;" href="/detail/"+item._id  )
                                                            i.fa.fa-pencil-square-o  แก้ไข
                                            else
                                                td 
                                                    div(style="display:inline;")
                                                        a.btn.btn-warning.btn-xs.btnEditDelete(type='submit' style="float:left;" href="/detail/"+item._id  )
                                                            i.fa.fa-pencil-square-o  แก้ไข
                                            
                                                td
                                                    form(name="deleteMat" , method="POST" , action="/deleteMat") 
                                                        input(type="text",name="id",value=item._id style="display:none;") 
                                                        button.btn.btn-danger.btn-xs.btnEditDelete(type='submit' style="float:left; margin-left:10px;" onClick="return confirm('Are you sure you want to delete " + item.materialid + "?')") 
                                                            i.fa.fa-trash-o  ลบ
                                                      
            script(src='templateInside/js/jquery.min.js')
            //- script(src='templateInside/js/jquery.backstretch.min.js')
            //- script(src='templateInside/js/jquery.flexslider.min.js')
            //- script(src='templateInside/js/bootstrap.min.js')
            script(src='bootstrap/dist/js/bootstrap.js')
            //- script(src='templateInside/js/templatemo_script.js')
   
           
//- if username
//-             h2 Hello #{username}
  